# lynx-JDBC
![Lynx](https://github.com/lynxworld/lynx-JDBC/assets/18690803/eb10d79f-34b9-4f8c-bd02-8c1abd52d1d6)

The Lynx JDBC connector is used to connect Lynx to a relational database to support executing Cypher graph queries on it.
<!-- GETTING STARTED -->
## Getting Started
### Import

Import by Maven.
* pom.xml
  ```xml
  <dependency>
      <groupId>org.grapheco</groupId>
      <artifactId>lynx-LDBC</artifactId>
      <version>0.1</version>
  </dependency>
  ```

### How to Use

1. Connect to database.
  ```scala
  val connector: LynxJDBCConnector = LynxJDBCConnector.connect(
      "jdbc:mysql://localhost:3306/DB", //jdbc url
      "username", // username
      "password") // password
  ```
2. Execute Cypher query.
  ```scala
  connector.run("match (n) return n limit 10")
  ```

### Schema & Config

1. Automatically generate schema.
  ```scala
  val db: DB = new DB(url, username, password)  //jdbc url, username, password
  val newSchema: Schema = SchemaManager.autoGeneration(db.connection) 
  ```
2. Use existing schema.
  ```scala
  val newSchema = SchemaManager.readJson("filePath") // filePath: the path where you saved the file
  val connector: LynxJDBCConnector = LynxJDBCConnector.connect(
      "jdbc:mysql://localhost:3306/DB",  //jdbc url
      "username",  // username
      "password",  // password
      newSchema)   // the schema you read from json
  ```
3. Save the schema as json file.
  ```scala
  SchemaManager.saveJson(filePath = "filePath", schema =newSchema） // filePath: The path you want to save, schema: The schema generated by autoGeneration
  ```
  The json file consists of two parts (nodes and relationships).
  Node has the following structure：
  ```scala
  table_name: String,    
  prefixed_id: Boolean,     // To facilitate faster retrieval in the future, and defaults to true.
  id: String,     // Primary key column name
  fix_label: Boolean,      // Defaults to true.     // Default is table name.
  properties: Array[(String, String)]     // Properties in the table
  ```
  And the relationships:
  ```scala
  table_name: String,
  table_id: String,     // Primary key column name if exists
  src_v_table: String,     // Source table name.
  src_v: String,     // Primary key column name of the source.
  f1_name: String,     // First foreign key column name in the table.
  dst_v_table: String,     // Destination table name.
  dst_v: String,     // Primary key column name of the destination.
  f2_name: String,     // Second foreign key column name in the table.
  prefixed_edge_id: Boolean,    // To facilitate faster retrieval in the future, and defaults to true.
  properties: Array[(String, String)]     // Properties in the table
  ```
  
